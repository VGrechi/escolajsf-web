<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<h:head>
	<h:outputStylesheet library="css" name="estilo.css"/>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"/>
    <link rel="shortcut icon" href="resources/imagens/favicon.ico"
		type="image/x-icon" />
      
     <title>Escola JSF</title>
	
	<h:form id="formTopbar">
		<div class="topbar">
			<div class="nome-topbar">
				<p:outputLabel value="#{segurancaBean.usuarioLogado.tipo.descricao}: "
					styleClass="bold"/>
				<p:outputLabel value="#{segurancaBean.usuarioLogado.nome}"/>
			</div>
		
			
			
			<nav id="topbar">
				<ul>
					<li role="navigation">
						<p:commandLink id="btnAccount"
							action="#{segurancaBean.abrirDialogAlterarSenha()}">
							
							<i class="material-icons icone-topbar"
								style="font-size: 36px;">account_circle</i>
						</p:commandLink>
					</li>
					
					<li role="navigation">
						<p:commandLink id="btnSair"
							action="#{loginBean.deslogar()}"
							ajax="false">
							
							<i class="icone-topbar material-icons"
								style="font-size: 36px;">power_settings_new</i>	
						</p:commandLink>
					</li>
				</ul>
				</nav>
			</div>
			
			<p:dialog id="dialogTrocarSenha"
				widgetVar="dialogTrocarSenhaWidgetVar"
				modal="true"
				closable="false"
				closeOnEscape="false"
				header="Alterar Senha">
				
				<p:messages autoUpdate="true" closable="true"/>
				
				<h:panelGrid columns="2">
					<p:outputLabel value="Senha Atual:"/>
					<p:password value="#{segurancaBean.senhaAtual}"/>
					<p:outputLabel value="Nova Senha:"/>
					<p:password value="#{segurancaBean.novaSenha}"/>
					<p:outputLabel value="Confirmar Senha:"/>
					<p:password value="#{segurancaBean.confirmarSenha}"/>	
				</h:panelGrid>
				
				<f:facet name="footer">
					<div align="center">
						<p:commandButton value="Cancelar"
							onclick="PF('dialogTrocarSenhaWidgetVar').hide();"
							styleClass="ui-priority-primary"/>
						<p:spacer width="10"/>
						<p:commandButton value="Salvar"
							action="#{segurancaBean.alterarSenha()}"
							styleClass="ui-priority-primary"/>
					</div>
				</f:facet>	
				
			</p:dialog>
	</h:form>
</h:head> 
<h:body> 

	<div class="conteudo" style="margin-top: 50px;">
		<ui:insert name="conteudo"/>
	</div>

</h:body> 
</html>
